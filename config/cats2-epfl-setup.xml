<?xml version="1.0"?>
<opencv_storage>
    <experiment>
        <name>TestExperiment</name>
        <!-- TODO : try to minimize the redundancy of the information on the quantity of agents. -->
        <agents>
            <numberOfAnimals>5</numberOfAnimals>
        </agents>
    </experiment>
    <robots>
        <numberOfRobots>1</numberOfRobots>
        <controlFrequencyHz>20</controlFrequencyHz>
        <fishMotionPatternFrequencyDivider>5</fishMotionPatternFrequencyDivider>
        <fishMotionPattern>
            <distanceCm>25</distanceCm>
            <speedCmSec>15</speedCmSec>
        </fishMotionPattern>
        <pid>
            <kp>1.10</kp>
            <ki>0.03</ki>
            <kd>0.00</kd>
        </pid>
        <defaultLinearSpeedCmSec>10</defaultLinearSpeedCmSec>
        <pathPlanningConfigPath>path-planning/two-rooms.xml</pathPlanningConfigPath>
        <fishBot_1>
            <id>H</id>
            <controlMapPath>control-maps/test-control-map.xml</controlMapPath>
        </fishBot_1>
        <fishBot_2>
            <id>F</id>
            <controlMapPath>control-maps/test-control-map.xml</controlMapPath>
        </fishBot_2>
    </robots>
    <setups>
        <mainCamera>
            <!--
                TODO : consider adding here the camera type or id to compare with the
                value in the calibration file.
            -->
            <imageSize>
                <width>512</width>
                <height>512</height>
            </imageSize>
            <cameraCalibrationFile>camera-calibration/epfl-setup-180/cats2-epfl-main-camera-basler.xml</cameraCalibrationFile>
            <tracking>
                <trackingMethod>blobDetector</trackingMethod>
                <numberOfAgents>7</numberOfAgents>
                <blobDetector>
                    <minBlobSizePx>0</minBlobSizePx>
                    <qualityLevel>0.01</qualityLevel>
                    <minDistance>20.0</minDistance>
                    <blockSize>5</blockSize>
                    <useHarrisDetector>0</useHarrisDetector>
                    <k>0.04</k>
            </blobDetector>
            </tracking>
        </mainCamera>
        <cameraBelow>
            <imageSize>
                <width>640</width>
                <height>480</height>
            </imageSize>
            <cameraCalibrationFile>camera-calibration/epfl-setup-180/cats2-epfl-180-angle-below-camera.xml</cameraCalibrationFile>
            <tracking>
                <trackingMethod>fishBotLedsTracking</trackingMethod>
                <maskFile>bottom-camera-mask.png</maskFile>
                <fishBotLedsTracking>
                    <!-- TODO : consider moving this to the robot's specific section. -->
                    <fishBot_H>
                        <color>
                            <r>90</r>
                            <g>150</g>
                            <b>200</b>
                        </color>
                        <threshold>30</threshold>
                    </fishBot_H>
                    <fishBot_F>
                        <color>
                            <r>45</r>
                            <g>130</g>
                            <b>220</b>
                        </color>
                        <threshold>20</threshold>
                    </fishBot_F>
                </fishBotLedsTracking>
            </tracking>
        </cameraBelow>
    </setups>
    <interSpecies>
        <publisherAddress>tcp://127.0.0.1:50001</publisherAddress>
    </interSpecies>
</opencv_storage>

